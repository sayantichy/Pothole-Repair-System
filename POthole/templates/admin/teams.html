{% extends "base.html" %}
{% block content %}
<h1 class="h4 mb-3">Teams</h1>

<form method="post" action="{{ url_for('admin.create_team') }}" class="mb-3 d-flex gap-2">
  <input name="name" class="form-control" placeholder="New team name" required>
  <button class="btn btn-success">Create Team</button>
</form>

<table class="table table-sm align-middle">
  <thead><tr><th>ID</th><th>Name</th><th>Lead</th><th>Members</th><th>Assign Lead</th><th>Add Member</th></tr></thead>
  <tbody>
  {% for t in teams %}
    <tr>
      <td>{{ t.id }}</td>
      <td>{{ t.name }}</td>
      <td>{{ t.lead.name if t.lead else "-" }}</td>
      <td>
        {% for m in t.members %}
          <span class="badge text-bg-secondary">{{ m.user.name }}</span>
        {% endfor %}
      </td>
      <td>
        <form method="post" action="{{ url_for('admin.assign_lead') }}" class="d-flex gap-2">
          <input type="hidden" name="team_id" value="{{ t.id }}">
          <input name="user_id" placeholder="User ID" class="form-control form-control-sm">
          <button class="btn btn-sm btn-warning">Set Lead</button>
        </form>
      </td>
      <td>
        <form method="post" action="{{ url_for('admin.add_member') }}" class="d-flex gap-2">
          <input type="hidden" name="team_id" value="{{ t.id }}">
          <input name="user_id" placeholder="User ID" class="form-control form-control-sm">
          <button class="btn btn-sm btn-primary">Add</button>
        </form>
      </td>
    </tr>
  {% endfor %}
  </tbody>
</table>
{% endblock %}

